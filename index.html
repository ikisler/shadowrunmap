<!DOCTYPE html>
<html>
		<head>
			<meta charset=utf-8>
			<meta name=viewport content=width=device-width,initial-scale=1>
			<link rel=stylesheet href=css/bootstrap.min.css>
			<link rel=stylesheet href=css/style.css>
			<link rel=stylesheet href=css/responsive.css>
			<script src=http://code.jquery.com/jquery-1.9.1.min.js></script>
			<script src=js/bootstrap.js></script>
			<script src=js/picturefill.min.js></script>

			<script src=https://cdn.firebase.com/js/client/2.3.1/firebase.js></script>
			
			<title></title>
		</head>
		<body>
<script src=https://maps.googleapis.com/maps/api/js?key=AIzaSyDhZW3pJBKP9ToFfTH9_jxVN-V3fA9d3R4></script>
<script>
// Create a reference to the Firebase containing zone information.
var myFirebaseRef = new Firebase('https://blistering-torch-7640.firebaseio.com/');

// Container for location information
var locations;

// When the Firebase is loaded, do all the things
myFirebaseRef.child('zones').on('value', function(snapshot) {
	// Testing
	//console.log(snapshot.val());
	locations = snapshot.val();
	//console.log(locationCoords);
	//console.log(locationCoords.auburn.boundaries);
	//console.log(snapshot.val().Everett);
});

setTimeout(function(){
	console.log(locationCoords.auburn.boundaries);
}, 5000);



/*** Google Maps Function and Highlighted Areas ***/

function initialize() {
	var mapOptions = {
		zoom: 9,
		center: new google.maps.LatLng(48.05, -121.700556), //47.973333, -122.200556
		mapTypeId: google.maps.MapTypeId.ROADMAP //TERRAIN
	};

	var map = new google.maps.Map(document.getElementById('map-canvas'),
		 mapOptions);

	var locationBGColors = [
		{location: 'Everett', color: '#0000FF'},
		{location: 'Snohomish', color: '#009900'},
		{location: 'Bellevue', color: '#09a'},
		{location: 'Redmond', color: '#FF0000'},
		{location: 'Renton', color: '#FF9900'},
		{location: 'Auburn', color: '#FFFF00'},
		{location: 'Tacoma', color: '#336600'},
		{location: 'Downtown', color: '#9900CC'},
		{location: 'Council Island', color: '#555'},
		{location: 'Outremer', color: '#003399'},
		{location: 'Puyallup', color: '#FF0000'},
		{location: 'Ft Lewis', color: '#0000FF'}
	];

	var nextShape;

	var arrPolygon = [everett, snohomish, bellevue, redmond, renton, auburn, tacoma, downtownSeattle, councilIsland, outremer, puyallup, ftLewis];

	for(var i=0; i< arrPolygon.length; i++) {
		nextShape = new  google.maps.Polygon({
				paths: arrPolygon[i],
				strokeColor: '#FF0000',
				strokeOpacity: 0, //0.8,
				strokeWeight: 2,
				fillColor: locationBGColors[i].color,
				fillOpacity: 0.35
		});

		nextShape.setMap(map);

	}

var arrLatLng = [];

	google.maps.event.addListener(map, 'click', function(event) {

		var obj = '{lat: ' + event.latLng.lat() + ', lng: ' + event.latLng.lng() + '},';
		arrLatLng.push(obj);
		console.log(arrLatLng);
	});
}


google.maps.event.addDomListener(window, 'load', initialize);


//document.addEventListener(window.onload, function(event) { //DOMContentLoaded
window.onload = function() {

var locationBGColors = [
		{location: 'Everett', color: '#0000FF'},
		{location: 'Snohomish', color: '#009900'},
		{location: 'Bellevue', color: '#09a'},
		{location: 'Redmond', color: '#FF0000'},
		{location: 'Renton', color: '#FF9900'},
		{location: 'Auburn', color: '#FFFF00'},
		{location: 'Tacoma', color: '#336600'},
		{location: 'Downtown', color: '#9900CC'},
		{location: 'Council Island', color: '#555'},
		{location: 'Outremer', color: '#003399'},
		{location: 'puyallup', color: '#FF0000'},
		{location: 'ftLewis', color: '#0000FF'}
	];

var element = document.getElementsByTagName('main');
var table = document.createElement('div');
table.className += 'key';
var tempContainerDiv;
var tempColorDiv;
var tempNameDiv;
var tempName;

for(var i=0; i<locationBGColors.length; i++) {
	// Create a DIV to hold the location
	tempDiv = document.createElement('div');
	tempDiv.className += 'key-location';

	// Create a box for the color
	tempColorDiv = document.createElement('div');
	tempColorDiv.className += 'key-location-color';
	tempColorDiv.style.backgroundColor = locationBGColors[i].color;

	// Create a box with text
	tempNameDiv = document.createElement('span');
	tempNameDiv.className += 'key-location-name';
	tempName = document.createTextNode(locationBGColors[i].location);
	tempNameDiv.appendChild(tempName);

	// Append everything to the table
	tempDiv.appendChild(tempColorDiv);
	tempDiv.appendChild(tempNameDiv);
	table.appendChild(tempDiv);
}

// Append everything to the main element
element[0].appendChild(table);
//console.log(element[0]);

};

</script>


				<header>
					<div class=logo>
						<div class=logo-front>Peter's</div>
						<div class=logo-back>Shadowrun Map</div>
					</div>
				</header>
				
				<main>
						<map>
							<div class=row-fluid style=height:500px;>
					        	<div id=map-canvas style=height:500px;></div>
							</div>
						</map>

				</main>

				<footer>
						<a href=http://ikisler.github.io/portfolio target=_blank>Designed by Isabeau Kisler</a>
				</footer>
		</body>
</html>